---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

const locale = 'fr';
---

<BaseLayout
  title="Inscription - CIRIV 2026"
  description="Formulaire d'inscription au Congrès Internationale de la Recherche, d’Innovation et Valorisation CIRIV 2026"
  locale={locale}
>
  <Header locale={locale} currentPath={Astro.url.pathname} />
  
  <main class="min-h-screen bg-gradient-to-br from-slate-50 to-teal-50 dark:from-slate-900 dark:to-slate-800 py-12">
    <div class="container mx-auto px-4">
      <div class="max-w-2xl mx-auto">
        <!-- Header Section -->
        <div class="text-center mb-8">
          <h1 class="text-4xl font-bold text-slate-900 dark:text-white mb-4">
            Inscription CIRIV 2026
          </h1>
          <p class="text-lg text-slate-600 dark:text-slate-300">
            Rejoignez le Congrès Internationale de la Recherche, d’Innovation et Valorisation
          </p>
        </div>

        <!-- Registration Form Card -->
        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-xl p-8 border border-slate-200 dark:border-slate-700">
          <form id="registrationForm" class="space-y-6">
            <!-- Row 1: Nom & Prénom -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- Nom -->
              <div>
                <label for="nom" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">
                  Nom <span class="text-red-500">*</span>
                </label>
                <input
                  type="text"
                  id="nom"
                  name="nom"
                  required
                  class="w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent dark:bg-slate-700 dark:text-white placeholder-slate-400 dark:placeholder-slate-400 transition-colors"
                  placeholder="Votre nom de famille"
                />
              </div>

              <!-- Prénom -->
              <div>
                <label for="prenom" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">
                  Prénom <span class="text-red-500">*</span>
                </label>
                <input
                  type="text"
                  id="prenom"
                  name="prenom"
                  required
                  class="w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent dark:bg-slate-700 dark:text-white placeholder-slate-400 dark:placeholder-slate-400 transition-colors"
                  placeholder="Votre prénom"
                />
              </div>
            </div>

            <!-- Row 2: Sexe/Civilité -->
            <div>
              <label for="civilite" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">
                Sexe / Civilité
              </label>
              <select
                id="civilite"
                name="civilite"
                class="w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent dark:bg-slate-700 dark:text-white transition-colors"
              >
                <option value="">Sélectionnez (optionnel)</option>
                <option value="M.">M.</option>
                <option value="Mme">Mme</option>
              </select>
            </div>

            <!-- Row 3: Email -->
            <div>
              <label for="email" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">
                Email <span class="text-red-500">*</span>
              </label>
              <input
                type="email"
                id="email"
                name="email"
                required
                class="w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent dark:bg-slate-700 dark:text-white placeholder-slate-400 dark:placeholder-slate-400 transition-colors"
                placeholder="votre.email@exemple.com"
              />
            </div>

            <!-- Row 4: Téléphone -->
            <div>
              <label for="telephone" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">
                Téléphone
              </label>
              <input
                type="tel"
                id="telephone"
                name="telephone"
                class="w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent dark:bg-slate-700 dark:text-white placeholder-slate-400 dark:placeholder-slate-400 transition-colors"
                placeholder="+212 6XX-XXXXXX"
              />
            </div>

            <!-- Row 5: Établissement -->
            <div>
              <label for="etablissement" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">
                Établissement <span class="text-red-500">*</span>
              </label>
              <input
                type="text"
                id="etablissement"
                name="etablissement"
                required
                class="w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent dark:bg-slate-700 dark:text-white placeholder-slate-400 dark:placeholder-slate-400 transition-colors"
                placeholder="Nom de votre établissement"
              />
            </div>

            <!-- Row 6: Laboratoire / Département -->
            <div>
              <label for="laboratoire" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">
                Laboratoire / Département
              </label>
              <input
                type="text"
                id="laboratoire"
                name="laboratoire"
                class="w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent dark:bg-slate-700 dark:text-white placeholder-slate-400 dark:placeholder-slate-400 transition-colors"
                placeholder="Nom du laboratoire ou département"
              />
            </div>

            <!-- Row 7: Ville & Pays -->
            <div>
              <label for="villePays" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">
                Ville & Pays <span class="text-red-500">*</span>
              </label>
              <input
                type="text"
                id="villePays"
                name="villePays"
                required
                class="w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent dark:bg-slate-700 dark:text-white placeholder-slate-400 dark:placeholder-slate-400 transition-colors"
                placeholder="Casablanca, Maroc"
              />
            </div>

            <!-- Row 8: Statut -->
            <div>
              <label for="statut" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">
                Statut <span class="text-red-500">*</span>
              </label>
              <select
                id="statut"
                name="statut"
                required
                class="w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent dark:bg-slate-700 dark:text-white transition-colors"
              >
                <option value="">Sélectionnez votre statut</option>
                <option value="Étudiant">Étudiant</option>
                <option value="Doctorant">Doctorant</option>
                <option value="Enseignant-chercheur">Enseignant-chercheur</option>
                <option value="Chercheur">Chercheur</option>
                <option value="Professionnel">Professionnel</option>
              </select>
            </div>

            <!-- Required Fields Notice -->
            <div class="text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2">
              <span class="text-red-500">*</span>
              <span>Champs obligatoires</span>
            </div>

            <!-- Next Button -->
            <div class="pt-4">
              <button
                type="button"
                onclick="goToNextStep()"
                class="w-full px-6 py-4 bg-gradient-to-r from-teal-600 to-teal-700 hover:from-teal-700 hover:to-teal-800 text-white font-semibold rounded-lg transition-all duration-300 hover:scale-[1.02] hover:shadow-lg hover:shadow-teal-500/25 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 dark:focus:ring-offset-slate-800 flex items-center justify-center gap-2"
              >
                Suivant
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                </svg>
              </button>
            </div>
          </form>
        </div>

        <!-- Information Banner -->
        <div class="mt-8 bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-800 rounded-xl p-6">
          <div class="flex items-start gap-3">
            <svg class="w-6 h-6 text-teal-600 dark:text-teal-400 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <div>
              <h3 class="text-lg font-semibold text-teal-900 dark:text-teal-100 mb-2">
                Processus d'inscription
              </h3>
              <p class="text-teal-800 dark:text-teal-200 text-sm leading-relaxed">
                Votre inscription se déroule en plusieurs étapes. Après avoir rempli vos informations personnelles, 
                vous pourrez procéder au choix de votre participation et finaliser votre inscription.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
  
  <Footer locale={locale} />
</BaseLayout>

<script>
  // Placeholder function for next step functionality
  function goToNextStep() {
    // Get form data
    const form = document.getElementById('registrationForm') as HTMLFormElement;
    const formData = new FormData(form);
    
    // Basic validation for required fields
    const requiredFields = ['nom', 'prenom', 'email', 'etablissement', 'villePays', 'statut'];
    const missingFields = [];
    
    for (const field of requiredFields) {
      if (!formData.get(field)) {
        missingFields.push(field);
      }
    }
    
    if (missingFields.length > 0) {
      alert('Veuillez remplir tous les champs obligatoires.');
      // Focus on first missing field
      const firstMissing = document.getElementById(missingFields[0]);
      if (firstMissing) {
        firstMissing.focus();
        firstMissing.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
      return;
    }
    
    // Log form data for debugging (will be replaced with actual step 2B logic)
    console.log('Form data collected:', Object.fromEntries(formData));
    
    // TODO: Implement step 2B navigation
    alert('Étape 1 complétée ! Prochaine étape à implémenter...');
  }
  
  // Make function globally available
  (window as any).goToNextStep = goToNextStep;
</script>
