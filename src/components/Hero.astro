---
import { useTranslations } from '../i18n/ui';
import { link } from '../utils/paths';

interface Props {
  locale: 'fr' | 'en' | 'ar';
}

const { locale } = Astro.props;
const t = useTranslations(locale);
const isRTL = locale === 'ar';
const baseUrl = import.meta.env.BASE_URL || '/';
---

<section class="relative overflow-hidden bg-slate-50 dark:bg-slate-900 pt-4 pb-12 sm:pb-16 lg:pt-6 lg:pb-20">
  <!-- Background Image & Overlay Layer -->
  <div class="absolute inset-0 z-0">
    <!-- Background Image -->
    <div 
      class="absolute inset-0 bg-cover bg-center bg-no-repeat" 
      style={`background-image: url('${baseUrl}images/home/Rabat_1.jpg');`}
    ></div>
    
    <!-- Gradient Overlay -->
    <!-- LTR: Left (Solid) -> Right (Transparent) -->
    <!-- RTL: Right (Solid) -> Left (Transparent) -->
    <div class="absolute inset-0 bg-gradient-to-r rtl:bg-gradient-to-l from-slate-50 via-slate-50/95 to-transparent dark:from-slate-900 dark:via-slate-900/90 dark:to-transparent"></div>
  </div>

  <!-- Background Decoration (Blobs) -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class={`absolute -top-40 ${isRTL ? '-left-40' : '-right-40'} w-80 h-80 bg-gradient-to-br from-brand-accent/20 to-brand-primary/20 rounded-full blur-3xl`}></div>
    <div class={`absolute -bottom-40 ${isRTL ? '-right-40' : '-left-40'} w-80 h-80 bg-gradient-to-tr from-teal-400/20 to-emerald-400/20 rounded-full blur-3xl`}></div>
  </div>

  <div class="container mx-auto px-2 sm:px-4 relative z-10">
    <div class={`grid lg:grid-cols-2 gap-8 sm:gap-12 lg:gap-16 items-center`}>
      <!-- Content -->
      <div class={`lg:col-start-1 ${isRTL ? 'text-right' : 'text-left'} animate-fade-in`}>
        <div class={`${isRTL ? 'w-full max-w-5xl ml-auto px-2 sm:pr-4' : 'max-w-2xl lg:max-w-3xl mr-auto lg:mr-0 px-2 sm:px-0'}`}>
          <h1 class={`text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold text-slate-900 dark:text-white whitespace-normal break-words hyphens-none ${isRTL ? 'text-right mb-8 sm:mb-14 leading-relaxed' : 'text-left mb-4 sm:mb-6 leading-tight'}`}>
            <span class={`bg-gradient-to-r from-brand-primary to-brand-accent dark:from-emerald-400 dark:to-teal-300 bg-clip-text text-transparent block`}>
              {t('hero.title')}
            </span>
          </h1>
          
          <p class={`text-base sm:text-lg md:text-xl text-slate-600 dark:text-slate-300 mb-6 sm:mb-8 leading-relaxed ${isRTL ? 'max-w-4xl text-right' : 'max-w-xl lg:max-w-2xl text-left'}`} set:html={t('hero.subtitle')}>
          </p>
        </div>
        
        <div class={`flex ${isRTL ? 'justify-end px-2' : 'justify-start px-2'} sm:px-0 mb-8 sm:mb-12`}>
          <a
            href={link({ locale, slug: 'inscription' })}
            class="inline-flex items-center gap-2 sm:gap-3 px-4 sm:px-8 py-3 sm:py-4 bg-brand-primary hover:bg-brand-primaryDark text-white font-semibold rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-brand-primary/25 focus:outline-none focus:ring-2 focus:ring-brand-accent focus:ring-offset-2 dark:focus:ring-offset-surface-dark text-sm sm:text-base"
          >
            {t('cta.register')}
            <svg class={`w-4 h-4 sm:w-5 sm:h-5 ${isRTL ? 'rotate-180' : ''}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
            </svg>
          </a>
        </div>
        
        <!-- Trusted By Section -->
        <div class={`space-y-4 pt-4 sm:pt-6 border-t border-slate-200/60 dark:border-slate-700/60 ${isRTL ? 'px-2' : 'px-2'} sm:px-0`}>
          <p class={`text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-widest ${isRTL ? 'text-right' : 'text-left'}`}>
            {t('hero.trustedBy')}
          </p>
          <div class={`flex items-center gap-6 sm:gap-8 md:gap-10 ${isRTL ? 'justify-end flex-row-reverse' : 'justify-start'} flex-wrap`}>
            <img 
              src={`${baseUrl}assets/logos/UH2C.png`}
              alt="UH2C University Logo"
              class="h-8 sm:h-10 md:h-12 w-auto object-contain opacity-60 hover:opacity-100 dark:opacity-70 dark:hover:opacity-100 transition-all duration-300 filter grayscale hover:grayscale-0 dark:brightness-0 dark:invert dark:hover:brightness-100 dark:hover:invert-0 hover:scale-105"
              loading="lazy"
            />
            <img 
              src={`${baseUrl}assets/logos/FSBM.png`}
              alt="FSBM Faculty Logo"
              class="h-8 sm:h-10 md:h-12 w-auto object-contain opacity-60 hover:opacity-100 dark:opacity-70 dark:hover:opacity-100 transition-all duration-300 filter grayscale hover:grayscale-0 dark:brightness-0 dark:invert dark:hover:brightness-100 dark:hover:invert-0 hover:scale-105"
              loading="lazy"
            />
            <img 
              src={`${baseUrl}assets/logos/AMARINOVA.png`}
              alt="AMARINOVA Logo"
              class="h-8 sm:h-10 md:h-12 w-auto object-contain opacity-60 hover:opacity-100 dark:opacity-70 dark:hover:opacity-100 transition-all duration-300 filter grayscale hover:grayscale-0 dark:brightness-0 dark:invert dark:hover:brightness-100 dark:hover:invert-0 hover:scale-105"
              loading="lazy"
            />
            <img 
              src={`${baseUrl}assets/logos/IAV.png`}
              alt="IAV Logo"
              class="h-8 sm:h-10 md:h-12 w-auto object-contain opacity-60 hover:opacity-100 dark:opacity-70 dark:hover:opacity-100 transition-all duration-300 filter grayscale hover:grayscale-0 dark:brightness-0 dark:invert dark:hover:brightness-100 dark:hover:invert-0 hover:scale-105"
              loading="lazy"
            />
          </div>
        </div>
      </div>

      <!-- Visual Element -->
      <div class={`lg:col-start-2 flex items-center justify-center ${isRTL ? 'lg:justify-end' : 'lg:justify-start'} animate-fade-in relative`}>
        <div class="relative group">
          <!-- Main Logo/Visual -->
          <div class={`relative z-10 backdrop-blur-md bg-white/40 dark:bg-slate-800/40 rounded-2xl p-8 sm:p-10 shadow-xl border border-white/20 dark:border-slate-700/50 transition-transform duration-500 hover:scale-[1.02] ${isRTL ? 'lg:mr-8' : 'lg:ml-8'}`}>
            <img 
              src={`${baseUrl}assets/logos/CIRIV.png`}
              alt="CIRIV'26 Conference Logo"
              class="w-32 h-32 sm:w-48 sm:h-48 object-contain mx-auto dark:hidden drop-shadow-sm"
              loading="eager"
            />
            <img 
              src={`${baseUrl}assets/logos/CIRIVB.png`}
              alt="CIRIV'26 Conference Logo"
              class="w-32 h-32 sm:w-48 sm:h-48 object-contain mx-auto hidden dark:block drop-shadow-sm"
              loading="eager"
            />
          </div>
          
          <!-- Floating Elements -->
          <div class={`absolute -top-6 w-24 h-24 bg-brand-accent/20 rounded-full blur-2xl animate-pulse ${isRTL ? '-left-6 lg:mr-8' : '-right-6 lg:ml-8'}`}></div>
          <div class={`absolute -bottom-6 w-32 h-32 bg-teal-400/20 rounded-full blur-2xl animate-pulse delay-1000 ${isRTL ? '-right-6 lg:mr-8' : '-left-6 lg:ml-8'}`}></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bottom Gradient Fade -->
  <div class="absolute bottom-0 left-0 w-full h-24 bg-gradient-to-t from-slate-50 dark:from-slate-900 to-transparent pointer-events-none z-10"></div>

  <!-- Scroll Down Indicator -->
  <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce hidden lg:flex flex-col items-center gap-2 z-20 opacity-60 hover:opacity-100 transition-opacity cursor-pointer">
    <span class="text-xs font-medium uppercase tracking-widest text-slate-500 dark:text-slate-400">Scroll</span>
    <svg class="w-5 h-5 text-brand-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
    </svg>
  </div>
</section>