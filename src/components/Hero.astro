---
import { useTranslations } from '../i18n/ui';
import { link } from '../utils/paths';

interface Props {
  locale: 'fr' | 'en' | 'ar';
}

const { locale } = Astro.props;
const t = useTranslations(locale);
const isRTL = locale === 'ar';
const baseUrl = import.meta.env.BASE_URL || '/';

const backgroundImages = [
  `${baseUrl}images/home/Rabat_1.webp`,
  `${baseUrl}images/home/Rabat_5.webp`,
  `${baseUrl}images/home/Rabat_3.webp`,
  `${baseUrl}images/home/Rabat_4.webp`,
  `${baseUrl}images/home/Rabat_2.webp`
];
---

<section class="relative min-h-screen flex flex-col items-center justify-center overflow-hidden bg-slate-900">
  
  <div class="absolute inset-0 z-0">
    {backgroundImages.map((img, index) => (
      <div 
        class="absolute inset-0 bg-cover bg-center bg-no-repeat animate-ken-burns"
        style={`
          background-image: url('${img}'); 
          animation-delay: ${index * 6}s; 
          opacity: 0;
        `}
      ></div>
    ))}
    
    <div class="absolute inset-0 bg-gradient-to-b from-slate-900/70 via-slate-900/20 to-slate-900/90"></div>
    <div class="absolute inset-0 bg-black/20"></div>
  </div>

  <div class="relative z-10 container mx-auto px-4 flex flex-col items-center text-center py-20">
    
    <div class="inline-flex items-center gap-4 sm:gap-6 rounded-full bg-black/40 border border-white/10 backdrop-blur-md py-2 px-6 sm:px-8 mb-8 shadow-xl animate-fade-in-down">
      <div class="flex items-center gap-2 text-emerald-400">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
        <span class="text-xs sm:text-sm font-bold text-white tracking-widest uppercase">{t('hero.date')}</span>
      </div>
      <div class="h-4 w-px bg-white/30"></div>
      <div class="flex items-center gap-2 text-emerald-400">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
        <span class="text-xs sm:text-sm font-bold text-white tracking-widest uppercase">{t('hero.location')}</span>
      </div>
    </div>

    <div class="mb-8 animate-fade-in-up">
      <img 
        src={`${baseUrl}assets/logos/CIRIVB.png`} 
        alt="CIRIV Logo" 
        class="h-24 sm:h-32 w-auto object-contain drop-shadow-2xl" 
      />
    </div>

    <div class="max-w-6xl mx-auto space-y-2 mb-10 relative">
      
      <h1 class="text-4xl sm:text-5xl md:text-7xl font-bold tracking-tight leading-none animate-fade-in-up delay-100">
        <span class="text-white" style="filter: drop-shadow(0 4px 4px rgba(0,0,0,0.9));">
          {t('hero.mainTitle')}
        </span> 
      </h1>
      
      <p class="text-lg sm:text-2xl md:text-3xl font-light text-white/95 animate-fade-in-up delay-200 tracking-wide mt-6" style="filter: drop-shadow(0 4px 4px rgba(0,0,0,0.9));">
        {t('hero.edition')} : <strong class="text-emerald-400 font-black uppercase tracking-wider">{t('hero.theme')}</strong>
      </p>
    </div>

    <div class="flex flex-col sm:flex-row items-center justify-center gap-5 w-full sm:w-auto animate-fade-in-up delay-300 mb-16">
      <a href={link({ locale, slug: 'inscription' })} class="group w-full sm:w-auto px-10 py-4 bg-emerald-600 hover:bg-emerald-500 text-white font-bold rounded-full transition-all duration-300 transform hover:scale-105 shadow-[0_10px_20px_rgba(5,150,105,0.4)] flex items-center justify-center gap-3">
        {t('cta.register')}
        <svg class="w-5 h-5 transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
      </a>
      
      <a href={link({ locale, slug: 'inscription' })} class="group w-full sm:w-auto px-10 py-4 bg-white/10 hover:bg-white/20 backdrop-blur-md border border-white/20 text-white font-semibold rounded-full transition-all duration-300 flex items-center justify-center gap-3">
        <span>{t('hero.submitAbstract')}</span>
      </a>
    </div>

    <div class="flex flex-wrap justify-center items-center gap-8 sm:gap-14 opacity-80 hover:opacity-100 transition-opacity duration-500 animate-fade-in-up delay-400">
      <img src={`${baseUrl}assets/logos/UH2C.png`} alt="UH2C" class="h-9 sm:h-11 w-auto brightness-0 invert" />
      <img src={`${baseUrl}assets/logos/FSBM.png`} alt="FSBM" class="h-9 sm:h-11 w-auto brightness-0 invert" />
      <img src={`${baseUrl}assets/logos/AMARINOVA.png`} alt="AMARINOVA" class="h-9 sm:h-11 w-auto brightness-0 invert" />
      <img src={`${baseUrl}assets/logos/IAV.png`} alt="IAV" class="h-9 sm:h-11 w-auto brightness-0 invert" />
    </div>

  </div>
</section>

<style>
  @keyframes kenBurns {
    0% { opacity: 0; transform: scale(1); }
    5% { opacity: 1; }
    33.33% { opacity: 1; transform: scale(1.1); }
    38.33% { opacity: 0; transform: scale(1.15); }
    100% { opacity: 0; transform: scale(1); }
  }

  .animate-ken-burns {
    animation: kenBurns 18s linear infinite;
  }

  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in-up {
    animation: fadeInUp 1s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
    opacity: 0;
  }

  @keyframes fadeInDown {
    from { opacity: 0; transform: translateY(-30px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in-down {
    animation: fadeInDown 1s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
  }
  
  .delay-100 { animation-delay: 0.1s; }
  .delay-200 { animation-delay: 0.2s; }
  .delay-300 { animation-delay: 0.3s; }
  .delay-400 { animation-delay: 0.5s; }
</style>